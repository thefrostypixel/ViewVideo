<!DOCTYPE html><html lang="en"><head><title></title><meta name="viewport" content="initial-scale=1"><meta name="description" content=""><link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'></svg>"><style>*:focus-visible{border:none;outline:none}body{display:flex;flex-direction:column;align-items:center;margin:20px;background:#000;color:#DDD;font-family:"system-ui","SF Pro Display","Helvetica Neue","Helvetica","Arial",sans-serif;user-select:none;-webkit-user-select:none}#drop{display:flex;justify-content:center;align-items:center;width:min(100vw - 40px, 900px);height:100px;margin-bottom:20px;border:3px dashed #AAA;border-radius:15px;cursor:pointer}#history-toggle{width:40px;height:40px;margin-right:20px;background:#000;border:2px solid #AAA;border-radius:15px;color:inherit;cursor:pointer}#playing{margin-bottom:20px}#history-list{padding-left:60px}#history-list div{display:flex;justify-content:space-between;align-items:center;margin-top:5px}#history-list button{width:40px;height:40px;margin-left:20px;background:#000;border:2px solid #AAA;border-radius:15px;color:inherit;font-size:inherit;cursor:pointer}video{max-width:1200px;width:100%;height:auto;border-radius:15px}input[type="file"]{display:none}</style></head><body><input id="file" type="file" accept="video/*"><div id="drop">Select or drop a video file</div><div id="history" hidden><button id="history-toggle"></button><span id="playing"></span><div id="history-list"></div></div><video id="player" controls playsinline preload="metadata" x-webkit-airplay="allow" disablepictureinpicture="false" hidden></video><script>let $=q=>document.querySelector(q);let time=s=>`${Math.floor((s || 0) / 60)}:${Math.floor((s || 0) % 60).toString().padStart(2, "0")}`;let history=[];try{history=JSON.parse(localStorage.getItem("ViewVideo"))||history}catch(e){};let showHistory=(playing,keepOpen)=>{if(!keepOpen){$("#history").removeAttribute("hidden");$("#history-toggle").toggleAttribute("hidden",!!playing&&history.length<2);$("#history-toggle").innerText="▷";$("#history-list").toggleAttribute("hidden",!0);$("#history-toggle").onclick=()=>{$("#history-list").toggleAttribute("hidden");$("#history-toggle").innerText=$("#history-list").hasAttribute("hidden")?"▷":"▽"}};$("#history-list").innerHTML="";history.slice(+!!playing).forEach((entry,i)=>{let entryElem=document.createElement("div");entryElem.innerText=`${entry.name} (${time(entry.time)})`;let removeButton=document.createElement("button");removeButton.innerText="✗";removeButton.onclick=()=>{history.splice(i+!!playing,1);try{localStorage.setItem("ViewVideo",JSON.stringify(history))}catch(e){};if(history.length){if(!playing){$("#playing").innerText=`Last: ${history[0].name} (${time(history[0].time)})`};showHistory(playing,history.length>!!playing)}else{$("#history").toggleAttribute("hidden",!0)}};entryElem.appendChild(removeButton);$("#history-list").appendChild(entryElem)})};if(history.length){showHistory();$("#playing").innerText=`Last: ${history[0].name} (${time(history[0].time)})`};let url;let loadFile=async file=>{if(file){URL.revokeObjectURL(url);$("#player").removeAttribute("hidden");$("#player").pause();$("#player").ontimeupdate=()=>{};$("#player").src=url=URL.createObjectURL(file);let name=file.name.match(/.*(?=\.)/)[0];let id=name.replace(/\s*\d*\s*$/,"")||Array.from(new Uint8Array(await crypto.subtle.digest("SHA-1",await file.slice(0,1048576).arrayBuffer()))).map(b=>b.toString(16).toUpperCase().padStart(2,"0")).join("");let historyIndex=history.findIndex(entry=>entry.id==id);$("#player").currentTime=history[historyIndex]?.name==name?history[historyIndex].time:0;if(historyIndex>-1){history.splice(historyIndex,1)};history.unshift({id,name,time:$("#player").currentTime});try{localStorage.setItem("ViewVideo",JSON.stringify(history))}catch(e){};showHistory(!0);$("#playing").innerText=`Playing: ${name} (${time($("#player").currentTime)})`;$("#player").ontimeupdate=()=>{$("#playing").innerText=`Playing: ${name} (${time($("#player").currentTime)})`;history[0].time=$("#player").currentTime;try{localStorage.setItem("ViewVideo",JSON.stringify(history))}catch(e){}}}};$("#file").addEventListener("change",e=>loadFile(e.target.files[0]));$("#drop").addEventListener("click",()=>$("#file").click());document.ondragover=e=>e.preventDefault();document.ondrop=e=>{e.preventDefault();loadFile(e.dataTransfer.files[0])}</script></body></html>